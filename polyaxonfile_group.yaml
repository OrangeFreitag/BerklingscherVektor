version: 1

kind: group

hptuning:
  concurrency: 10
  random_search:
    n_experiments: 100
    
  matrix:
    lr:
      logspace: 0.04:0.12:20
    dropout:
      logspace: 0.1:0.4:20
    epochs:
      range: 400:1000:50

build:
  image: gw000/keras
  build_steps:
    - pip install polyaxon-client
    - pip install pandas
    - pip install scikit-learn
    - pip install keras
    - pip install tensorflow
    
run:
  cmd: python model.py --learning_rate={{ lr }} --batch_size={{ 200 }} --dropout={{ dropout }} --num_epochs={{ epochs }}